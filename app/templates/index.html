<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
  <title>De-biaser</title>
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width"> 
  <link rel="stylesheet" href="../static/css/jquery-ui-slider-pips.css">
  <link rel="stylesheet" href="../static/css/jquery-ui-slider-pips.min.css"> 
  <link href="../static/jqvmap/jqvmap.css" media="screen" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="../static/css/jquery-ui.css">
  <link rel="stylesheet" href="../static/css/jquery-ui.min.css">
  <link rel="stylesheet" href="../static/css/jquery-ui-slider-pips.css">
  <link rel="stylesheet" href="../static/css/jquery-ui-slider-pips.min.css">
  <link href="../static/slider/slider.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <link href="../static/css/quilljs.css" media="screen" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="../static/css/templatemo_main.css">




<!-- 
Dashboard Template 
http://www.templatemo.com/preview/templatemo_415_dashboard
-->
</head>
<body>
  <div class="navbar navbar-inverse" role="navigation">
      <div class="navbar-header">
        <div class="logo"><h1>Dashboard - Admin Template</h1></div>
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button> 
      </div>   
    </div>
    <div class="template-page-wrapper">
      <div class="navbar-collapse collapse templatemo-sidebar">
        <ul class="templatemo-sidebar-menu">
          <li class="sub open">
            <a href="javascript:;">
              <i class="fa fa-calendar"></i> Select Time Period <div class="pull-right"><span class="caret"></span></div>
            <ul class="templatemo-submenu">
              <li><a href="javascript:;">
                <input type="number" id = "from" value="1970">
                <input type="number" id = "to" value="2000"></a>
              </li>
              <li><a href="javascript:;">
                
                <div id="flat-slider"></div>
              </a></li>
            </ul>
          </li>
          <li class="sub open">
            <a href="javascript:;">
              <i class="fa fa-map-marker"></i> Select Demographic <div class="pull-right"><span class="caret"></span></div>
            <ul class="templatemo-submenu">
              <li><a href="javascript:;">
                <div id="vmap_world" class="vmap"></div>
              </a></li>
            </ul>
          </li>
        </ul>
      </div><!--/.navbar-collapse -->

      <div class="templatemo-content-wrapper">
        <div class="templatemo-content">
          <div class="main">
            <section>
              <h1>Dashboard</h1>
              <p>Dashboard is free admin template for everyone. Credits go to <a href="http://chartjs.org">Chart JS</a>, <a href="http://getbootstrap.com">Bootstrap</a>, and <a href="http://jqvmap.com">JQVMap</a>. templatemo provides <a href="#">free website templates</a> that can be used for any purpose. Morbi id nisi enim. Ut congue interdum pharetra facilisi. Aenean consectetur pellentesque mauris nec ornare. Nam tortor just, condimentum.</p>
              <div id="form-container" class="container">
                  <form id="my-form">
                    <div class="row form-group">
                      <label for="about">Insert your story here</label>
                      <input name="about" type="hidden">
                      <div id="editor-container">
                        <p></p>
                      </div>
                    </div>
                    <div class = "row">
                      <div class="col-xs-2">
                        <button class="btn btn-primary" id="submit" type="submit"><a href="#section2">Submit</a></button>
                      </div>
                      <div class="col-xs-2" style="float: right">
                        <button class="btn btn-primary" id='reset'>Reset</button>
                      </div>
                    </div>
                  </form>
              </div>
            </section>
          </div>

          <div class="main" id="section2">
            <section>
               <div class="list-group" id="exampleSection">
                
                </div>
            </section>
           
          </div>
          <!-- <div id="editor">
            <p>Hello World!</p>
            <p>Some initial <strong>bold</strong> text</p>
            <p><br></p>
          </div> -->
          
        </div>
      </div>
      </div>
      <footer class="templatemo-footer">
        <div class="templatemo-copyright">
          <p>Copyright &copy; 2084 Your Company Name</p>
        </div>
      </footer>
    </div>

    <script src="../static/js/jquery.min.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="../static/js/templatemo_script.js"></script>
    <script src="../static/jqvmap/jquery.vmap.js" type="text/javascript"></script>
    <script src="../static/jqvmap/maps/jquery.vmap.world.js" type="text/javascript"></script>
    <script src="../static/jqvmap/data/jquery.vmap.sampledata.js" type="text/javascript"></script>     
    <script type="text/javascript">
      $(document).ready(function() {

        $('#vmap_world').vectorMap({
          map: 'world_en',
          backgroundColor: '#ffffff',
          color: '#333',
          hoverOpacity: 0.7,
          selectedColor: '#ff45ff',
          enableZoom: true,
          showTooltip: true,
          values: sample_data,
          scaleColors: ['#C8EEFF', '#006491'],
          onRegionClick:function(event, code) {                         
            var name = (code);                        
            //alert(name);
            console.log(name);                    
          },
          normalizeFunction: 'polynomial'
          // onRegionClick: function (event, code) {
          //   alert(map.getRegionName(code));
          // }
        });
      });
    </script>

    <script src="../static/js/jquery-ui.js"></script>
    <script src="../static/js/jquery-ui.min.js"></script>
    <script src="../static/js/jquery-ui-slider-pips.min.js"></script>
    <script src="../static/js/jquery-ui-slider-pips.js"></script>
    <script src="../static/slider/slider.js" type="text/javascript"></script>
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="../static/js/quilljs.js" type="text/javascript"></script>
    <script>
      $(document).ready(function(){
        // Add smooth scrolling to all links
        $("a").on('click', function(event) {

          // Make sure this.hash has a value before overriding default behavior
          if (this.hash !== "") {
            // Prevent default anchor click behavior
            event.preventDefault();

            // Store hash
            var hash = this.hash;

            // Using jQuery's animate() method to add smooth page scroll
            // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
            $('html, body').animate({
              scrollTop: $(hash).offset().top
            }, 800, function(){
         
              // Add hash (#) to URL when done scrolling (default click behavior)
              window.location.hash = hash;
            });
          } // End if
        });
      });
    </script>

    <script type="text/javascript">
      $(document).ready(function(){
        // Add smooth scrolling to all links
        $("#reset").on('click', function(event) {

          quill.setText("");
          
        });

        alert("ok");

        $("#submit").on('click', function(event) {
          event.preventDefault();
          var myQuery = quill.getText();
          var time_from = $("#from").val();
          var time_to = $("#to").val();
          
          console.log(time_from);

          var reply = " ";

          var resp = $.post("/api/bias-checker", {query: myQuery, from: time_from, to: time_to}, function(a){
            reply = a;
            console.log(reply);
            var lines = a.split("\n");
            console.log(lines.length);
            numLines = lines.length;

            var exampleSection = document.getElementById("exampleSection");
            //var exampleList = exampleSection.childNodes[1];
            while (exampleSection.hasChildNodes()) {
              exampleSection.removeChild(exampleSection.lastChild);
            }
            console.log(exampleSection);
         

            var start = document.createElement("A");
            start.className = "list-group-item active";
            var heading  = document.createElement("H4");
            heading.className = "list-group-item-heading";
            heading.textContent = lines[0];
            console.log(lines[1]);
            start.appendChild(heading);
            exampleSection.appendChild(start);
            //console.log(exampleList + "hi");

            if(numLines > 1) {

              for(var i=1; i < numLines;i++){

                if(lines[i].length > 1) {
                  var displayLine = document.createElement("A");
                  displayLine.className = "list-group-item";

                  var exampleContent = lines[i].split(";");
                  var numExamples = exampleContent.length;

                  var exampleHeading = document.createElement("H4");
                  exampleHeading.className = "list-group-item-heading";
                  exampleHeading.textContent = exampleContent[0];
                  displayLine.appendChild(exampleHeading);
                  

                  exampleListings = document.createElement("UL");

                  for(var j=1; j<numExamples; j++){

                    exampleEntry = document.createElement("LI");
                    exampleEntry.className = "list-group-item-text";
                    exampleText = document.createTextNode(exampleContent[j]);
                    exampleEntry.appendChild(exampleText);
                    exampleListings.appendChild(exampleEntry);

                  }


                  displayLine.appendChild(exampleListings);
                  exampleSection.appendChild(displayLine);
                }

              }
              

            }

            


          });
          
        })

      });
    </script>

</body>
</html>