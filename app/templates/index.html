<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
  <title>Occupational Debiasing</title>
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width"> 
  <link rel="stylesheet" href="../static/css/jquery-ui-slider-pips.css">
  <link href="../static/favicon.ico" rel="icon" type="image/x-icon" />
  <link rel="stylesheet" href="../static/css/jquery-ui-slider-pips.min.css"> 
  <link href="../static/jqvmap/jqvmap.css" media="screen" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="../static/css/jquery-ui.css">
  <link rel="stylesheet" href="../static/css/jquery-ui.min.css">
  <link rel="stylesheet" href="../static/css/jquery-ui-slider-pips.css">
  <link rel="stylesheet" href="../static/css/jquery-ui-slider-pips.min.css">
  <link href="../static/slider/slider.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <link href="../static/css/quilljs.css" media="screen" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="../static/css/templatemo_main.css">

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">


<!-- 
Dashboard Template 
http://www.templatemo.com/preview/templatemo_415_dashboard
-->
</head>
<body>
  <div class="navbar navbar-inverse" role="navigation">
      <div class="navbar-header">
        <div class="logo"><a href="/" style="text-decoration: none; color: inherit;"><h1>Occupational Debiasing</h1></a></div>
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button> 
      </div>   
    </div>
    <div class="template-page-wrapper">
      <div class="navbar-collapse collapse templatemo-sidebar">
        <ul class="templatemo-sidebar-menu">
          <li class="sub open">
            <a href="javascript:;">
              <i class="fa fa-calendar"></i> Select Time Period <div class="pull-right"><span class="caret"></span></div></a>
            <ul class="templatemo-submenu">
              <li><a href="javascript:;">
                <b>From:&emsp;</b><input type="number" id = "from" value="1970" readonly="true">
                <b>To:&emsp;</b><input type="number" id = "to" value="2000" readonly="true"></a> 
              </li>
              <li><a href="javascript:;">
                
                <div id="flat-slider"></div>
              </a></li>
            </ul>
          </li>
          <li class="sub open">
            <a href="javascript:;">
              <i class="fa fa-map-marker"></i> Select Demographic <div class="pull-right"><span class="caret"></span></div></a>
            <ul class="templatemo-submenu">
              <li><a href= "javascript:;"> <b>You selected:</b> &emsp;     
                <select class="selectpicker" data-live-search="true" data-width="75%" data-size="10" tabindex="-98" data-header="Select a country" id = "dropdown" onchange="onUpdate()">
                  <option value="af">Afghanistan</option>
                  <option value="ag">Antigua And Barbuda</option>
                  <option value="al">Albania</option>
                  <option value="am">Armenia</option>
                  <option value="ao">Angola</option>
                  <option value="ar">Argentina</option>
                  <option value="at">Austria</option>
                  <option value="au">Australia</option>
                  <option value="az">Azerbaijan</option>
                  <option value="ba">Bosnia And Herzegovina</option>
                  <option value="bb">Barbados</option>
                  <option value="bd">Bangladesh</option>
                  <option value="be">Belgium</option>
                  <option value="bf">Burkina Faso</option>
                  <option value="bg">Bulgaria</option>
                  <option value="bi">Burundi</option>
                  <option value="bj">Benin</option>
                  <option value="bn">Brunei Darussalam</option>
                  <option value="bo">Bolivia</option>
                  <option value="br">Brazil</option>
                  <option value="bs">Bahamas</option>
                  <option value="bt">Bhutan</option>
                  <option value="bw">Botswana</option>
                  <option value="by">Belarus</option>
                  <option value="bz">Belize</option>
                  <option value="ca">Canada</option>
                  <option value="cd">Congo</option>
                  <option value="cf">Central African Republic</option>
                  <option value="cg">Congo</option>
                  <option value="ch">Switzerland</option>
                  <option value="ci">Cote D'ivoire</option>
                  <option value="cl">Chile</option>
                  <option value="cm">Cameroon</option>
                  <option value="cn">China</option>
                  <option value="co">Colombia</option>
                  <option value="cr">Costa Rica</option>
                  <option value="cu">Cuba</option>
                  <option value="cv">Cape Verde</option>
                  <option value="cy">Cyprus</option>
                  <option value="cz">Czech Republic</option>
                  <option value="de">Germany</option>
                  <option value="dj">Djibouti</option>
                  <option value="dk">Denmark</option>
                  <option value="dm">Dominica</option>
                  <option value="do">Dominican Republic</option>
                  <option value="dz">Algeria</option>
                  <option value="ec">Ecuador</option>
                  <option value="ee">Estonia</option>
                  <option value="eg">Egypt</option>
                  <option value="er">Eritrea</option>
                  <option value="es">Spain</option>
                  <option value="et">Ethiopia</option>
                  <option value="fi">Finland</option>
                  <option value="fj">Fiji</option>
                  <option value="fk">Falkland Islands</option>
                  <option value="fr">France</option>
                  <option value="ga">Gabon</option>
                  <option value="gb">United Kingdom</option>
                  <option value="gd">Grenada</option>
                  <option value="ge">Georgia</option>
                  <option value="gf">French Guiana</option>
                  <option value="gh">Ghana</option>
                  <option value="gl">Greenland</option>
                  <option value="gm">Gambia</option>
                  <option value="gn">Guinea</option>
                  <option value="gq">Equatorial Guinea</option>
                  <option value="gr">Greece</option>
                  <option value="gt">Guatemala</option>
                  <option value="gw">Guinea-bissau</option>
                  <option value="gy">Guyana</option>
                  <option value="hn">Honduras</option>
                  <option value="hr">Croatia</option>
                  <option value="ht">Haiti</option>
                  <option value="hu">Hungary</option>
                  <option value="id">Indonesia</option>
                  <option value="ie">Ireland</option>
                  <option value="il">Israel</option>
                  <option selected="selected" value="in">India</option>
                  <option value="iq">Iraq</option>
                  <option value="ir">Iran</option>
                  <option value="is">Iceland</option>
                  <option value="it">Italy</option>
                  <option value="jm">Jamaica</option>
                  <option value="jo">Jordan</option>
                  <option value="jp">Japan</option>
                  <option value="ke">Kenya</option>
                  <option value="kg">Kyrgyz Republic</option>
                  <option value="kh">Cambodia</option>
                  <option value="km">Comoros</option>
                  <option value="kn">Saint Kitts And Nevis</option>
                  <option value="kp">North Korea</option>
                  <option value="kr">South Korea</option>
                  <option value="kw">Kuwait</option>
                  <option value="kz">Kazakhstan</option>
                  <option value="la">Lao People's Democratic Republic</option>
                  <option value="lb">Lebanon</option>
                  <option value="lc">Saint Lucia</option>
                  <option value="lk">Sri Lanka</option>
                  <option value="lr">Liberia</option>
                  <option value="ls">Lesotho</option>
                  <option value="lt">Lithuania</option>
                  <option value="lv">Latvia</option>
                  <option value="ly">Libya</option>
                  <option value="ma">Morocco</option>
                  <option value="md">Moldova</option>
                  <option value="mg">Madagascar</option>
                  <option value="mk">Macedonia</option>
                  <option value="ml">Mali</option>
                  <option value="mm">Myanmar</option>
                  <option value="mn">Mongolia</option>
                  <option value="mr">Mauritania</option>
                  <option value="mt">Malta</option>
                  <option value="mu">Mauritius</option>
                  <option value="mv">Maldives</option>
                  <option value="mw">Malawi</option>
                  <option value="mx">Mexico</option>
                  <option value="my">Malaysia</option>
                  <option value="mz">Mozambique</option>
                  <option value="na">Namibia</option>
                  <option value="nc">New Caledonia</option>
                  <option value="ne">Niger</option>
                  <option value="ng">Nigeria</option>
                  <option value="ni">Nicaragua</option>
                  <option value="nl">Netherlands</option>
                  <option value="no">Norway</option>
                  <option value="np">Nepal</option>
                  <option value="nz">New Zealand</option>
                  <option value="om">Oman</option>
                  <option value="pa">Panama</option>
                  <option value="pe">Peru</option>
                  <option value="pf">French Polynesia</option>
                  <option value="pg">Papua New Guinea</option>
                  <option value="ph">Philippines</option>
                  <option value="pk">Pakistan</option>
                  <option value="pl">Poland</option>
                  <option value="pt">Portugal</option>
                  <option value="py">Paraguay</option>
                  <option value="qa">Qatar</option>
                  <option value="re">Reunion</option>
                  <option value="ro">Romania</option>
                  <option value="rs">Serbia</option>
                  <option value="ru">Russia</option>
                  <option value="rw">Rwanda</option>
                  <option value="sa">Saudi Arabia</option>
                  <option value="sb">Solomon Islands</option>
                  <option value="sc">Seychelles</option>
                  <option value="sd">Sudan</option>
                  <option value="se">Sweden</option>
                  <option value="si">Slovenia</option>
                  <option value="sk">Slovakia</option>
                  <option value="sl">Sierra Leone</option>
                  <option value="sn">Senegal</option>
                  <option value="so">Somalia</option>
                  <option value="sr">Suriname</option>
                  <option value="st">Sao Tome And Principe</option>
                  <option value="sv">El Salvador</option>
                  <option value="sy">Syrian Arab Republic</option>
                  <option value="sz">Swaziland</option>
                  <option value="td">Chad</option>
                  <option value="tg">Togo</option>
                  <option value="th">Thailand</option>
                  <option value="tj">Tajikistan</option>
                  <option value="tl">Timor-leste</option>
                  <option value="tm">Turkmenistan</option>
                  <option value="tn">Tunisia</option>
                  <option value="tr">Turkey</option>
                  <option value="tt">Trinidad And Tobago</option>
                  <option value="tw">Taiwan</option>
                  <option value="tz">Tanzania</option>
                  <option value="ua">Ukraine</option>
                  <option value="ug">Uganda</option>
                  <option value="ae">United Arab Emirates</option>
                  <option value="us">United States</option>
                  <option value="uy">Uruguay</option>
                  <option value="uz">Uzbekistan</option>
                  <option value="ve">Venezuela</option>
                  <option value="vn">Vietnam</option>
                  <option value="vu">Vanuatu</option>
                  <option value="ye">Yemen</option>
                  <option value="za">South Africa</option>
                  <option value="zm">Zambia</option>
                  <option value="zw">Zimbabwe</option>

                </select>
              </a>
              </li>
              <li><a href="javascript:;">
                <div id="vmap_world" class="vmap"></div>
              </a></li>
            </ul>
          </li>
        </ul>
      </div><!--/.navbar-collapse -->

      <div class="templatemo-content-wrapper">
        <div class="templatemo-content">
          <div class="main">
            <section>
              
              <div id="form-container" class="container">
                  <form id="my-form">
                    <div class="row form-group">
                      <label for="about">Insert your story here</label>
                      <input name="about" type="hidden">
                      <div id="editor-container">
                        <p id ="editor-writing-area"></p>
                      </div>
                    </div>
                    <div class = "row">
                      <div class="col-xs-2">
                        <button class="btn btn-primary" id="submit" type="submit"><a href="#section2">Submit</a></button>
                      </div>
                      <div class="col-xs-2" style="float: right">
                        <button class="btn btn-primary" id='reset'>Reset</button>
                      </div>
                    </div>
                  </form>
              </div>
            </section>
          </div>

          <div class="main" id="info">
            <section>
              <div class="list-group">
                <a href='#' class="list-group-item active">
                  <h4>
                    Details of your query:
                  </h4>
                </a>
                <a href="#" class="list-group-item">
                  Start of time period: <input type="number" id = "from2" value="1970" readonly="true">
                </a>
                <a href="#" class="list-group-item">
                  End of time period: <input type="number" id = "to2" value="2000" readonly="true">
                </a>
                <a href="#" class="list-group-item">
                  Demographic selected: <input type="text" id = "countryName" value="India" readonly="true">
                </a>
              </div>
            </section>
          </div>

          <div class="main" id="section2">
            <section>
               <div class="list-group" id="exampleSection">
              
                </div>
            </section>
           
          </div>
          
          
        </div>
      </div>
      </div>
      <footer class="templatemo-footer">
        <div class="templatemo-copyright">
          <p>Copyright &copy; IBM India Research Laboratory</p>
        </div>
      </footer>
    </div>

    <script src="../static/js/jquery.min.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="../static/js/templatemo_script.js"></script>
    <script src="../static/jqvmap/jquery.vmap.js" type="text/javascript"></script>
    <script src="../static/jqvmap/maps/jquery.vmap.world.js" type="text/javascript"></script>
    <script src="../static/jqvmap/data/jquery.vmap.sampledata.js" type="text/javascript"></script>     
    

    <script src="../static/js/jquery-ui.js"></script>
    <script src="../static/js/jquery-ui.min.js"></script>
    <script src="../static/js/jquery-ui-slider-pips.min.js"></script>
    <script src="../static/js/jquery-ui-slider-pips.js"></script>
    <script src="../static/slider/slider.js" type="text/javascript"></script>
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="../static/js/quilljs.js" type="text/javascript"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js" type="text/javascript"></script>
    <script>
      $(document).ready(function(){
        // Add smooth scrolling to all links
        $("a").on('click', function(event) {

          // Make sure this.hash has a value before overriding default behavior
          if (this.hash !== "") {
            // Prevent default anchor click behavior
            event.preventDefault();

            // Store hash
            var hash = this.hash;

            // Using jQuery's animate() method to add smooth page scroll
            // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
            $('html, body').animate({
              scrollTop: $(hash).offset().top
            }, 800, function(){
         
              // Add hash (#) to URL when done scrolling (default click behavior)
              window.location.hash = hash;
            });
          } // End if
        });
      });
    </script>

    <script type="text/javascript">
      $(document).ready(function(){
        // Add smooth scrolling to all links

        $('select').selectpicker({
          dropupAuto: false
        });
        // alert("ok");

        var country_codes = {'ae': 'united arab emirates', 'af': 'afghanistan', 'ag': 'antigua and barbuda', 'al': 'albania', 'am': 'armenia', 'ao': 'angola', 'ar': 'argentina', 'at': 'austria', 'au': 'australia', 'az': 'azerbaijan', 'ba': 'bosnia and herzegovina', 'bb': 'barbados', 'bd': 'bangladesh', 'be': 'belgium', 'bf': 'burkina faso', 'bg': 'bulgaria', 'bi': 'burundi', 'bj': 'benin', 'bn': 'brunei darussalam', 'bo': 'bolivia', 'br': 'brazil', 'bs': 'bahamas', 'bt': 'bhutan', 'bw': 'botswana', 'by': 'belarus', 'bz': 'belize', 'ca': 'canada', 'cd': 'congo', 'cf': 'central african republic', 'cg': 'congo', 'ch': 'switzerland', 'ci': "cote d'ivoire", 'cl': 'chile', 'cm': 'cameroon', 'cn': 'china', 'co': 'colombia', 'cr': 'costa rica', 'cu': 'cuba', 'cv': 'cape verde', 'cy': 'cyprus', 'cz': 'czech republic', 'de': 'germany', 'dj': 'djibouti', 'dk': 'denmark', 'dm': 'dominica', 'do': 'dominican republic', 'dz': 'algeria', 'ec': 'ecuador', 'ee': 'estonia', 'eg': 'egypt', 'er': 'eritrea', 'es': 'spain', 'et': 'ethiopia', 'fi': 'finland', 'fj': 'fiji', 'fk': 'falkland islands', 'fr': 'france', 'ga': 'gabon', 'gb': 'united kingdom', 'gd': 'grenada', 'ge': 'georgia', 'gf': 'french guiana', 'gh': 'ghana', 'gl': 'greenland', 'gm': 'gambia', 'gn': 'guinea', 'gq': 'equatorial guinea', 'gr': 'greece', 'gt': 'guatemala', 'gw': 'guinea-bissau', 'gy': 'guyana', 'hn': 'honduras', 'hr': 'croatia', 'ht': 'haiti', 'hu': 'hungary', 'id': 'indonesia', 'ie': 'ireland', 'il': 'israel', 'in': 'india', 'iq': 'iraq', 'ir': 'iran', 'is': 'iceland', 'it': 'italy', 'jm': 'jamaica', 'jo': 'jordan', 'jp': 'japan', 'ke': 'kenya', 'kg': 'kyrgyz republic', 'kh': 'cambodia', 'km': 'comoros', 'kn': 'saint kitts and nevis', 'kp': 'north korea', 'kr': 'south korea', 'kw': 'kuwait', 'kz': 'kazakhstan', 'la': "lao people's democratic republic", 'lb': 'lebanon', 'lc': 'saint lucia', 'lk': 'sri lanka', 'lr': 'liberia', 'ls': 'lesotho', 'lt': 'lithuania', 'lv': 'latvia', 'ly': 'libya', 'ma': 'morocco', 'md': 'moldova', 'mg': 'madagascar', 'mk': 'macedonia', 'ml': 'mali', 'mm': 'myanmar', 'mn': 'mongolia', 'mr': 'mauritania', 'mt': 'malta', 'mu': 'mauritius', 'mv': 'maldives', 'mw': 'malawi', 'mx': 'mexico', 'my': 'malaysia', 'mz': 'mozambique', 'na': 'namibia', 'nc': 'new caledonia', 'ne': 'niger', 'ng': 'nigeria', 'ni': 'nicaragua', 'nl': 'netherlands', 'no': 'norway', 'np': 'nepal', 'nz': 'new zealand', 'om': 'oman', 'pa': 'panama', 'pe': 'peru', 'pf': 'french polynesia', 'pg': 'papua new guinea', 'ph': 'philippines', 'pk': 'pakistan', 'pl': 'poland', 'pt': 'portugal', 'py': 'paraguay', 'qa': 'qatar', 're': 'reunion', 'ro': 'romania', 'rs': 'serbia', 'ru': 'russia', 'rw': 'rwanda', 'sa': 'saudi arabia', 'sb': 'solomon islands', 'sc': 'seychelles', 'sd': 'sudan', 'se': 'sweden', 'si': 'slovenia', 'sk': 'slovakia', 'sl': 'sierra leone', 'sn': 'senegal', 'so': 'somalia', 'sr': 'suriname', 'st': 'sao tome and principe', 'sv': 'el salvador', 'sy': 'syrian arab republic', 'sz': 'swaziland', 'td': 'chad', 'tg': 'togo', 'th': 'thailand', 'tj': 'tajikistan', 'tl': 'timor-leste', 'tm': 'turkmenistan', 'tn': 'tunisia', 'tr': 'turkey', 'tt': 'trinidad and tobago', 'tw': 'taiwan', 'tz': 'tanzania', 'ua': 'ukraine', 'ug': 'uganda', 'us': 'united states', 'uy': 'uruguay', 'uz': 'uzbekistan', 've': 'venezuela', 'vn': 'vietnam', 'vu': 'vanuatu', 'ye': 'yemen', 'za': 'south africa', 'zm': 'zambia', 'zw': 'zimbabwe'}


        var countrySpace = document.getElementById("countryName");
        var options = document.getElementsByTagName("option");
        var dropDown = document.getElementById("dropdown");
        console.log(countrySpace);

        var ctry = "in";

        $('#vmap_world').vectorMap({
          map: 'world_en',
          backgroundColor: '#ffffff',
          color: '#333',
          hoverOpacity: 0.7,
          selectedColor: '#ff45ff',
          enableZoom: true,
          showTooltip: true,
          values: sample_data,
          scaleColors: ['#C8EEFF', '#006491'],
          selectedRegions: ['in'],
          onRegionSelect:function(event, code) {                         
            var name = (code);                        
            //alert(name);
            ctry = (code);

            var country_toks = country_codes[code].split(" ");
            var country_name = "";

            for (var i = 0; i < country_toks.length; i++) {
              country_toks[i] = country_toks[i].charAt(0).toUpperCase() + country_toks[i].substr(1);
            }

            country_name = country_toks.join(" ");

            countrySpace.value = country_name;

            $('.selectpicker').selectpicker('val', code);

            for (var i = 0; i < Object.keys(country_codes).length; i++) {
              
              if(options[i].value == code) {
                console.log("hiiiiii");
                console.log(options[i]);
                
                dropDown.selectedIndex = i;
                break;

                //console.log($('dropdown').val(i));
                
              }
            }

            
            console.log(code);

          },
          normalizeFunction: 'polynomial'
        });

        // function to highlight text
        function applyHighlights(text, triplets) {

          var textArea = document.getElementById('editor-container').childNodes[0].childNodes[0];
          console.log(textArea)
          var content = quill.getText()

          toks = content.split(" ");
          console.log("toks: " + toks);
          for (var i = 0; i < toks.length; i++) {
            
            for (var j = 0; j < triplets.length; j++) {

              tmp = toks[i].replace(/(^[ '\n\.\^\$\*#&]+)|([ '\.\^\$\*#&\n]+$)/g, '');
              console.log("tmp: " + tmp);
              if(tmp == triplets[j][0] || tmp == triplets[j][2] || tmp.toLowerCase() == triplets[j][2]) {
                console.log(tmp + " " + j);
                quill.formatText(content.indexOf(tmp), tmp.length, {'bold': true, 'background-color': '#A2D9CE'});
                // toks[i] = toks[i].replace(tmp, "<mark>" + tmp + "</mark>");
              }
            }
          }
        }

        // Code for submit button
        $("#submit").on('click', function(event) {
          event.preventDefault();

          var exampleSection = document.getElementById("exampleSection");
            //var exampleList = exampleSection.childNodes[1];
          while (exampleSection.hasChildNodes()) {
            exampleSection.removeChild(exampleSection.lastChild);
          }
          console.log(exampleSection);

          
          var myQuery = quill.getText();
          var time_from = $("#from").val();
          var time_to = $("#to").val();
          var place = ctry;
          console.log("------------");
          console.log(place);
          
          console.log(time_from);

          var reply = " ";

          var resp = $.post("/api/bias-checker", {query: myQuery, from: time_from, to: time_to, place: place}, function(a){
            reply = a;
            console.log(reply['response'][0]);

            var lines = reply['response'][0].split("\n");
            console.log(lines.length);
            numLines = lines.length;

            
         

            var start = document.createElement("A");
            start.className = "list-group-item active";
            var heading  = document.createElement("H4");
            heading.className = "list-group-item-heading";
            heading.textContent = lines[0];
            console.log(lines[1]);
            start.appendChild(heading);
            exampleSection.appendChild(start);
            //console.log(exampleList + "hi");

            if(numLines > 1) {

              for(var i=1; i < numLines;i++){

                if(lines[i].length > 1) {
                  var displayLine = document.createElement("A");
                  displayLine.className = "list-group-item";

                  var exampleContent = lines[i].split(";");
                  var numExamples = exampleContent.length;

                  var exampleHeading = document.createElement("H4");
                  exampleHeading.className = "list-group-item-heading";
                  exampleHeading.textContent = exampleContent[0];
                  displayLine.appendChild(exampleHeading);
                  

                  exampleListings = document.createElement("UL");

                  for(var j=1; j<numExamples; j++){

                    exampleEntry = document.createElement("LI");
                    exampleEntry.className = "list-group-item-text";
                    exampleLink = document.createElement("A");
                    exampleLinkText = exampleContent[j].split(" ").slice(-1)[0];
                    exampleLink.href = exampleLinkText;
                    exampleLink.target = "_blank";
                    exampleLink.text = exampleContent[j].split(" ").slice(0, exampleContent[j].split(" ").length - 1).join(" ");
                    exampleEntry.appendChild(exampleLink);
                    exampleListings.appendChild(exampleEntry);

                  }


                  displayLine.appendChild(exampleListings);
                  exampleSection.appendChild(displayLine);
                }

              }
              
              if(numLines > 2)
              {
                var triplets = reply['response'][1]

                console.log(triplets)

                text = quill.getText();
                console.log(text)
                text = applyHighlights(text, triplets);
                console.log(text);
              }            

            }    
          });
          
        });




      });

  

    </script>

    <script type="text/javascript">
      
      var country_codes = {'ae': 'united arab emirates', 'af': 'afghanistan', 'ag': 'antigua and barbuda', 'al': 'albania', 'am': 'armenia', 'ao': 'angola', 'ar': 'argentina', 'at': 'austria', 'au': 'australia', 'az': 'azerbaijan', 'ba': 'bosnia and herzegovina', 'bb': 'barbados', 'bd': 'bangladesh', 'be': 'belgium', 'bf': 'burkina faso', 'bg': 'bulgaria', 'bi': 'burundi', 'bj': 'benin', 'bn': 'brunei darussalam', 'bo': 'bolivia', 'br': 'brazil', 'bs': 'bahamas', 'bt': 'bhutan', 'bw': 'botswana', 'by': 'belarus', 'bz': 'belize', 'ca': 'canada', 'cd': 'congo', 'cf': 'central african republic', 'cg': 'congo', 'ch': 'switzerland', 'ci': "cote d'ivoire", 'cl': 'chile', 'cm': 'cameroon', 'cn': 'china', 'co': 'colombia', 'cr': 'costa rica', 'cu': 'cuba', 'cv': 'cape verde', 'cy': 'cyprus', 'cz': 'czech republic', 'de': 'germany', 'dj': 'djibouti', 'dk': 'denmark', 'dm': 'dominica', 'do': 'dominican republic', 'dz': 'algeria', 'ec': 'ecuador', 'ee': 'estonia', 'eg': 'egypt', 'er': 'eritrea', 'es': 'spain', 'et': 'ethiopia', 'fi': 'finland', 'fj': 'fiji', 'fk': 'falkland islands', 'fr': 'france', 'ga': 'gabon', 'gb': 'united kingdom', 'gd': 'grenada', 'ge': 'georgia', 'gf': 'french guiana', 'gh': 'ghana', 'gl': 'greenland', 'gm': 'gambia', 'gn': 'guinea', 'gq': 'equatorial guinea', 'gr': 'greece', 'gt': 'guatemala', 'gw': 'guinea-bissau', 'gy': 'guyana', 'hn': 'honduras', 'hr': 'croatia', 'ht': 'haiti', 'hu': 'hungary', 'id': 'indonesia', 'ie': 'ireland', 'il': 'israel', 'in': 'india', 'iq': 'iraq', 'ir': 'iran', 'is': 'iceland', 'it': 'italy', 'jm': 'jamaica', 'jo': 'jordan', 'jp': 'japan', 'ke': 'kenya', 'kg': 'kyrgyz republic', 'kh': 'cambodia', 'km': 'comoros', 'kn': 'saint kitts and nevis', 'kp': 'north korea', 'kr': 'south korea', 'kw': 'kuwait', 'kz': 'kazakhstan', 'la': "lao people's democratic republic", 'lb': 'lebanon', 'lc': 'saint lucia', 'lk': 'sri lanka', 'lr': 'liberia', 'ls': 'lesotho', 'lt': 'lithuania', 'lv': 'latvia', 'ly': 'libya', 'ma': 'morocco', 'md': 'moldova', 'mg': 'madagascar', 'mk': 'macedonia', 'ml': 'mali', 'mm': 'myanmar', 'mn': 'mongolia', 'mr': 'mauritania', 'mt': 'malta', 'mu': 'mauritius', 'mv': 'maldives', 'mw': 'malawi', 'mx': 'mexico', 'my': 'malaysia', 'mz': 'mozambique', 'na': 'namibia', 'nc': 'new caledonia', 'ne': 'niger', 'ng': 'nigeria', 'ni': 'nicaragua', 'nl': 'netherlands', 'no': 'norway', 'np': 'nepal', 'nz': 'new zealand', 'om': 'oman', 'pa': 'panama', 'pe': 'peru', 'pf': 'french polynesia', 'pg': 'papua new guinea', 'ph': 'philippines', 'pk': 'pakistan', 'pl': 'poland', 'pt': 'portugal', 'py': 'paraguay', 'qa': 'qatar', 're': 'reunion', 'ro': 'romania', 'rs': 'serbia', 'ru': 'russia', 'rw': 'rwanda', 'sa': 'saudi arabia', 'sb': 'solomon islands', 'sc': 'seychelles', 'sd': 'sudan', 'se': 'sweden', 'si': 'slovenia', 'sk': 'slovakia', 'sl': 'sierra leone', 'sn': 'senegal', 'so': 'somalia', 'sr': 'suriname', 'st': 'sao tome and principe', 'sv': 'el salvador', 'sy': 'syrian arab republic', 'sz': 'swaziland', 'td': 'chad', 'tg': 'togo', 'th': 'thailand', 'tj': 'tajikistan', 'tl': 'timor-leste', 'tm': 'turkmenistan', 'tn': 'tunisia', 'tr': 'turkey', 'tt': 'trinidad and tobago', 'tw': 'taiwan', 'tz': 'tanzania', 'ua': 'ukraine', 'ug': 'uganda', 'us': 'united states', 'uy': 'uruguay', 'uz': 'uzbekistan', 've': 'venezuela', 'vn': 'vietnam', 'vu': 'vanuatu', 'ye': 'yemen', 'za': 'south africa', 'zm': 'zambia', 'zw': 'zimbabwe'}

      var list = Object.keys(country_codes);


      function onUpdate(){
        

        var dropdown = document.getElementById("dropdown");

        var selected = dropdown.value;
        
        for (var i = 0; i < list.length; i++) {
          $('#vmap_world').vectorMap('deselect', list[i]);
        }
          

        $('#vmap_world').vectorMap('select', selected);

      }    

      $("#reset").on('click', function(event) {
          event.preventDefault();
          quill.setText("");

          document.getElementById("from").value = 1970;
          document.getElementById("to").value = 2000;
          document.getElementById("from2").value = 1970;
          document.getElementById("to2").value = 2000;


          $("#flat-slider").slider("values", 0, 1970);
          $("#flat-slider").slider("values", 1, 2000);

          for (var i = 0; i < list.length; i++) {
          $('#vmap_world').vectorMap('deselect', list[i]);
        }
          

          $('#vmap_world').vectorMap('select', "in");

          //document.getElementById("dropdown").value = "in";


          var exampleSection = document.getElementById("exampleSection");
            //var exampleList = exampleSection.childNodes[1];
          while (exampleSection.hasChildNodes()) {
            exampleSection.removeChild(exampleSection.lastChild);
          }
          console.log(exampleSection);
          
        });

    </script>

</body>
</html>